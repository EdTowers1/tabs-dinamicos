<?prg
#include "./lib/tweb/tweb.ch"

LOCAL o, oDlg, oBrw, aOptions, aColumnas, aEvents, aData

// Definir las columnas de la tabla
aColumnas := { ;
    { 'title' => "Código", 'field' => "CODCLI", 'width' => 120, 'resizable' => .f., 'headerSort' => .f.}, ;
    { 'title' => "Nombre Completo", 'field' => "NOMCLI", 'width' => 320, 'resizable' => .f., 'headerSort' => .f.} ;
}

// Opciones para el browse
aOptions := { ;
    'index' => 'ROW_ID', ;
    'height' => '400px', ;
    'sortable' => .F.    ;
}

// eventos para la tabla
aEvents := { ;
	{ 'name' => 'tableBuilt' , 'proc' => 'init_browse' }, ;
	{ 'name' => 'rowClick' , 'proc' => 'select_cliente' } ;
}

DEFINE DIALOG oDlg

    DEFINE FORM o ID 'dlg_clientes' API 'api_clientes' OF oDlg			
    
    INIT FORM o 	

        ROW o 			
            DIV o STYLE 'margin-bottom: 2px; width: 100%;'
                GET ID 'cFiltro' GRID 12 ;
                VALUE "" ;
                LABEL 'Filtro de busqueda :' ;
                PLACEHOLDER 'Ingrese el nombre o código del cliente...' ;
                BUTTON '<i class="fas fa-search"></i>';
                ACTION 'search_clientes' ;
                OF o
            ENDDIV o
        ENDROW o

        ROW o
            COL o GRID 12
                // Usar el componente de tabla
                HTML o FILE 'components/tabla_browse.html' PARAMS o, 'clientes', aColumnas, aData, aEvents, aOptions
            ENDCOL o
        ENDROW o

				DIV o STYLE 'margin-top:5px;'
                // Incluir componente de paginación
                HTML o FILE 'components/barra_paginacion.html' PARAMS o, 'nav', 0
        ENDDIV o

    ENDFORM o

INIT DIALOG oDlg RETURN
?>